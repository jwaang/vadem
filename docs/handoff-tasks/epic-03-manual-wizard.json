{
  "name": "Epic 3: Property Manual & Guided Wizard",
  "branchName": "ralph/epic-03-manual-wizard",
  "description": "The core content creation flow. Creator builds the permanent manual through a guided wizard.",
  "userStories": [
    {
      "id": "US-025",
      "title": "Property data model in Convex",
      "description": "As a developer, I need the Property schema in Convex with all related tables so the manual can be stored and queried.",
      "acceptanceCriteria": [
        "Property table: id, name, address, photo (file reference), ownerId",
        "ManualSections table: id, propertyId, title, icon, sortOrder",
        "Instructions table: id, sectionId, text, sortOrder, timeSlot (morning/afternoon/evening/anytime), isRecurring, proofRequired",
        "LocationCards table: id, parentId, parentType (instruction/pet/vault), photoUrl, videoUrl, caption, roomTag",
        "All tables have proper indexes for querying",
        "Convex mutations for CRUD on each table",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-002"]
    },
    {
      "id": "US-026",
      "title": "Wizard step 1 — Add your home",
      "description": "As a creator, I want to add my home's name, address, and photo so the manual has a property identity.",
      "acceptanceCriteria": [
        "Fields: property name (required), address (optional), photo upload (optional)",
        "Photo upload: preview thumbnail after selection, stored via Convex file storage",
        "'Next' button proceeds to step 2",
        "'Save & finish later' option persists partial data",
        "Wizard progress indicator shows step 1 active",
        "Verify in browser at 375px",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 2,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-005", "US-013", "US-025"]
    },
    {
      "id": "US-030",
      "title": "Pet profile data model in Convex",
      "description": "As a developer, I need the Pet schema in Convex so pet profiles can be stored with all required and optional fields.",
      "acceptanceCriteria": [
        "Pets table with all fields: id, propertyId, name, species, breed, age, photos (file references array), feedingInstructions, vetName, vetPhone, personalityNotes, medicalConditions, medications (array of {name, dosage, frequency, time, locationCardId}), behavioralQuirks, allergies, microchipNumber, insuranceInfo, walkingRoutine, groomingNeeds, comfortItems, sortOrder",
        "Queries: get pets by propertyId",
        "Mutations: create, update, delete pet",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-002"]
    },
    {
      "id": "US-027",
      "title": "Wizard step 2 — Add your pets",
      "description": "As a creator, I want to add my pets with rich profiles so the sitter has complete care information.",
      "acceptanceCriteria": [
        "'Add a pet' button opens pet profile form",
        "Required fields: photo, name, species/breed, age, feeding instructions, vet name + phone",
        "Optional fields: personality notes, medical conditions, medications (with schedule), behavioral quirks, allergies, microchip, walking routine, grooming, comfort items",
        "Can add multiple pets (repeat form)",
        "Each field supports attaching a location card (US-037)",
        "Wizard progress indicator shows step 2 active",
        "'Skip' option if no pets (unlikely but allowed)",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-026", "US-030"]
    },
    {
      "id": "US-028",
      "title": "Wizard step 3 — Add access info (vault items)",
      "description": "As a creator, I want to add my door codes, WiFi password, and alarm code during setup so they're ready for sharing.",
      "acceptanceCriteria": [
        "Pre-built item types: door code, alarm code, WiFi, gate code, garage code, safe combination, custom",
        "Each item: label, value (masked input), instruction text, optional location card",
        "'Add another' button for multiple items",
        "Values stored securely (see Epic 6 for encryption)",
        "'Skip' option — vault items can be added later",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-026", "US-049"]
    },
    {
      "id": "US-029",
      "title": "Wizard step 4 — Emergency contacts",
      "description": "As a creator, I want to add emergency contacts during setup so the sitter always has tap-to-call access.",
      "acceptanceCriteria": [
        "Pre-filled slot: ASPCA Poison Control (888-426-4435)",
        "Default slots to fill: Owner primary, Owner secondary/partner, Veterinarian, Emergency neighbor",
        "Each contact: name, role, phone number, optional notes",
        "Drag to reorder or manual sort order",
        "'Add another' for additional contacts",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-026", "US-057"]
    },
    {
      "id": "US-031",
      "title": "Wizard step 5 — House instructions by section",
      "description": "As a creator, I want to add house instructions organized by section so the manual is structured and searchable.",
      "acceptanceCriteria": [
        "Pre-built sections offered: Access & Arrival, Appliances, Kitchen, Trash & Mail, Plants & Garden, Where Things Are, House Rules, Departure / Lockup",
        "Creator can select which sections to include (checkbox list)",
        "Per section: add multiple instructions (text + optional location card + optional time slot + proof toggle)",
        "Reorder instructions within a section via drag or arrows",
        "'Add custom section' option with custom title and icon",
        "Each instruction can attach a location card inline",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-026", "US-025"]
    },
    {
      "id": "US-032",
      "title": "Wizard step 6 — Review & publish",
      "description": "As a creator, I want to review my complete Handoff before publishing so I can catch any missing information.",
      "acceptanceCriteria": [
        "Preview renders the manual as the sitter would see it (read-only sitter view)",
        "Summary checklist: property, X pets, X vault items, X contacts, X sections with Y instructions",
        "Incomplete items highlighted with warning badges",
        "'Edit' link per section jumps back to relevant wizard step",
        "'Publish' button finalizes the manual and lands on dashboard",
        "Manual status changes from 'draft' to 'published'",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 8,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-026", "US-027", "US-028", "US-029", "US-031"]
    },
    {
      "id": "US-033",
      "title": "Edit manual sections after wizard",
      "description": "As a creator, I want to edit, add, reorder, or delete manual sections after the initial wizard so I can keep the manual updated.",
      "acceptanceCriteria": [
        "Access from dashboard -> My Property -> edit sections",
        "Add new section, edit section title/icon, delete section (with confirmation)",
        "Reorder sections via drag or arrows",
        "Add/edit/delete instructions within a section",
        "Attach/detach location cards on existing instructions",
        "Changes save in real-time (Convex mutations)",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-025", "US-032"]
    },
    {
      "id": "US-034",
      "title": "Edit pet profiles after wizard",
      "description": "As a creator, I want to edit or add pet profiles after the initial wizard so I can update care details.",
      "acceptanceCriteria": [
        "Access from dashboard -> My Property -> Pets",
        "Edit any field on existing pet profiles",
        "Add new pets",
        "Delete a pet (with confirmation)",
        "Reorder pets",
        "Changes reflected immediately for any active sitter view",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 10,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-030", "US-032"]
    },
    {
      "id": "US-035",
      "title": "Full-text search across manual (sitter-side)",
      "description": "As a sitter, I want to search the entire manual so I can quickly find 'dog food' or 'thermostat' without scrolling.",
      "acceptanceCriteria": [
        "Search bar at top of manual view (design system SearchBar component)",
        "Searches across: instruction text, section titles, pet profile fields, location card captions",
        "Results show matching instruction with context snippet + section name",
        "Tap result jumps to that instruction with location card visible",
        "Search works offline (indexes cached content)",
        "Empty state: 'No results for [query]'",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 11,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-014", "US-005", "US-025"]
    },
    {
      "id": "US-036",
      "title": "Manual sitter view with section navigation",
      "description": "As a sitter, I want to browse the full manual organized by sections so I can find anything I need beyond today's tasks.",
      "acceptanceCriteria": [
        "Section navigation pills at top (US-014)",
        "Tapping a section scrolls to that section",
        "Instructions displayed with inline location cards",
        "Pet profiles rendered with Pet Profile Card component",
        "Emergency contacts accessible from this view",
        "Accessible via 'Manual' tab in bottom navigation",
        "pnpm typecheck passes",
        "pnpm lint passes",
        "pnpm build passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 12,
      "passes": false,
      "notes": "",
      "dependsOn": ["US-007", "US-008", "US-014", "US-025"]
    }
  ]
}
